## 1. 作用域概念
1. JavaScript作用域：代码名字（变量）在某个范围内起作用和效果；
2. 目的：是为了提高程序的可靠性，更重要的是减少命名冲突；
3. JavaScript（es6前）中的作用域有两种：
   1. 全局作用域；
   2. 局部作用域（函数作用域）。
### 1.2 全局作用域
   1. 指整个script标签 或者是一个单独的js文件
   ```
   var num = 10;
   console.log(num);
   ```
### 1.3 局部作用域（函数作用域）
   1. 在函数内部，这个代码的名字只在函数的内部起效果和作用；
   ```
    function fn() {
        var num = 20;
        console.log(num)
    }
    fn();
   ```
### 1.4 块级作用域
1. 现阶段js中没有块级作用域；
2. js也是在es6新增的块级作用域
3. 块级作用域 {} if {}  for {}
4. java：外面的是不能调用num的；
if(xx) {
    int num = 10;
}
## 2. 变量的作用域
1. 根据作用域的不同，变量可以分为 全局变量、局部变量；
### 2.1 全局变量
   1. 在全局作用域下的变量，在全局都可以使用；
   2. 在函数内部，没有声明直接赋值的变量也属于全局变量；
   ```
    var num = 10;// num就是全局变量
    console.log(num); 
    function fn() {
        var num = 20;
        console.log(num)
    }
    fn();
   ```
### 2.2 局部变量
   1. 在局部作用域下的变量（在函数内部的变量）；
   2. 函数的形参也可以看作是局部变量；
    ```
    function fn(aru) {// 函数的形参也可以看作是局部变量
        var num = 20;// num 就是局部变量，只能在函数内部使用
        num 1 = 10;// 在函数内部，没有声明直接赋值的变量也属于全局变量
    }
    fn();
    <!-- console.log(num) -->//不能输出
    ```
### 2.3 全局变量和局部变量区别（执行效率）
   1. 在任何一个地方都可以使用，只有在浏览器关闭时才会被销毁，比较占内存资源；
   2. 只在函数内部使用，当其所在的代码块被执行时，会被初始化；当代码块运行结束后，就会被销毁，更节省内存空间。
## 3. 作用域链
1. 只要是代码，就至少有一个作用域；
2. 写在函数内部的局部作用域；
3. 如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域；
4. 作用域链：内部函数访问外部函数的变量，采取的是链式查找的方式来决定取哪个值（就近原则，往上看）；
```
var num = 10;
function fn() {
    var num = 20;
    function fun() {
        console.log(num);// 20 站在目标出发，一层一层的往外(往上看)查找！！！！
    }
    fun();
}
fn();
```
## 4. JavaScript 预解析
1. JavaScript 代码是由浏览器中的 JavaScript 解析器来执行的；
2. js解析器（引擎）在运行js代码的时候分为两步：预解析和代码执行。
3. 在当前作用域下, JS 代码执行之前，浏览器会默认把带有 var 和 function 声明的变量在内存中进行提前声明或者定义；
4. 代码执行： 从上到下执行JS语句。
### 4.1 预解析
   1. js引擎会把js里面所有的 var 和 function 提升到当前作用域的最前面；
   2. 分为变量预解析（变量提升）和函数预解析（函数提升）；
   3. 变量提升：
       1. 就是把所有声明的变量提升到当前作用域的最前面，不提升赋值操作；
   4. 函数提升：
       1. 把所有的函数声明提升到当前作用域的最前面，不调用函数，不执行函数体；
       2. 函数表达式声明必须写在函数下面。
       3. 必须是通过声明的方式（命名函数），函数表达式复制的变量是变量提升，与变量值无关；
   5. 案例1：
        ```
        //案例1：
        var num = 10;
        function fn(){
            console.log(num);
            var num = 20;
            console.log(num);
        } 
        fn();
        //解析后相当于以下代码：
        var num;
        function fn() {
            var num;
            console.log(num);// undefined
            num = 20;
            console.log(num);// 20
        }
        num = 10;
        fn();
        ```
    6. 案例2：
        ```
        var a = 18;
        f1();
        function f1() {
            var b = 9;
            console.log(a);
            console.log(b);
            var a = '123';
        }
        //解析后相当于以下代码：
        var a;
        function f1() {
            var b;
            var a;
            b = 9;
            console.log(a);// 输出 undefined
            console.log(b);// 9
            a = '123';
        }
        a = 18;
        f1();
        ```
    7. 案例3：（面试经典题）
        ```
        f1();
        console.log(c);
        console.log(b);
        console.log(a);
        function f1() {  
            //集体声明: var a = 9, b = 9, c = 9;
            var a = b = c = 9;// 相当于 var a = 9; b = 9; c = 9;
            console.log(a);
            console.log(b);
            console.log(c);
        }

        //解析后相当于以下代码：
        function f1() {
            var a;// 只声明了a
            a = b = c = 9;// b和c是直接赋值，当全局变量看
            console.log(a);//9
            console.log(b);//9
            console.log(c);//9
        }
        f1();
        console.log(c);//9 全局变量任何地方都可以使用
        console.log(b);// 9
        console.log(a);// 报错（没有声明）
        ```

